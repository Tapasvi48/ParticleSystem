package main

import (
	"fmt"
	"os"
	"os/exec"
	"particle"
	"time"
)

func clearScreen() {
	// Cross-platform clear screen
	cmd := exec.Command("clear") // For Linux/macOS
	if os.Getenv("OS") == "Windows_NT" {
		cmd = exec.Command("cmd", "/c", "cls") // For Windows
	}
	cmd.Stdout = os.Stdout
	cmd.Run()
}
func main() {
	// Create coffee with parameters (possibly temperature and steam intensity)
	coffee := particle.NewCoffe(61, 8)
	timer := time.NewTicker(100 * time.Millisecond)

	// Store the ASCII art of the coffee mug
	var coffeeAscii = `               .........:--===++++======================++++===--:.........
              ...:-=*#%%%%%%%%%%###***+++++++++++++****##%%%%%%%%%%#*+=::...
              :::.:--=+**##%%%%%%%###***************####%%%%%%%##**+=-:..:::
              :::::::..........::::::::::::::::::::::::::::.........::::::::
              ::::........................     ...................:::::::::.
              :===:......................        .................:::::--==..
               :---==-:::-=-:::..........        ..........::--=====+*+=--:......
               ::::..::::-==+++******++++++++++++++++******++======-::::::.   ....
               .:::........................::::..................:::::::::     ....
                ::::............................................:::::::::.     ....
                 :::......::..................................:::::::::::      ....
                 .:::.....::::..............................::::::::::::.    .....
                  ::::.....:::::::......................:::::::::::::::::::......
                   ::::....::::::::::::::::....::::::::::::::::::::::::::::....
                  .:::::...:::::::::::::::::::::::::::::::::::::::::::..
             ..::---:::::...::::::::::::::::::::::::::::::::::::::::::---:::.
         .::---------::::::..::::::::::::::::::::::::::::::::::::::::---------::.
       ::-----------::::::::..:::::::::::::::::::::::::::::::::::::::------------::.
     .:-------::::::::::::::::.::::::::::::::::::::::::::::::::::::::::::::---------:
    .-----:::::::::::::----:::::::::::::::::::::::::::::::::::------:::::::::::------.
    .--:::::::::::::::-----===-::::::::::::::::::::::::::::-===-----::::::::::::::---.
    ..::::::::::::::::::---=+***+=-::::::::::::::::::::-=+**+==---::::::::::::::::::..
     ..::::::::::::::::::::--==++***++==---------===++**+++=--:::::::::::::::::::::..
     ..:-::::::::::::::::::::::::-----==============-----::::::::::::::::::::::::-:..
       ..:==-::.::::::::::::::::....:::::::::::::::::::::::::::::::::::::::.:-==:..
         ...:-=+==-::...:::::::::::::...............:::::::::::::::..::--=+==::..
            ...::-=++**++==---:::.........................:::--==++**++=-::...
                 ....::--==++***#####*****************####***++==--::.....
                       ......::::::----============----::::::......
                                 ........................


`
	fmt.Println(coffeeAscii)

	// Main loop to update and display the steam
	for {
		<-timer.C
		clearScreen()
		coffee.Update()
		steam := coffee.Display()

		fmt.Println() // Add some space above
		for _, row := range steam {

			fmt.Printf("              %s\n", row)
		}

		fmt.Println(coffeeAscii)
	}
}
